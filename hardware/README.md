# 硬件采用五级流水线架构
**取指=>译码=>执行=>访存=>写回**

# 接口定义
#################################################################
## 取指
取指单元负责根据PC值将指令从ICCM中取出，并送入译码单元进行译码操作
### 输入
    input [31:0] instr_iccm_2_ifu;              //从ICCM里读出的指令
    input        flush_from_exe;                //从执行单元来的分支信号
    input [31:0] flush_addr_exe;                //从执行单元来的正确的执行地址
    input        flush_from_dec;                //从译码单元来的分支信号
    input [31:0] flush_addr_dec;                //从译码单元来的正确的执行地址

### 输出
    output [31:0] instr_addr_ifu_2_dec_o;       // 输出的指令地址 
    output [31:0] instr_ifu_2_dec_o;            // 输出给译码单元的指令数据 
#################################################################

#################################################################
## 译码
译码单元负责将取值单元送来的指令进行译码操作，获取寄存器文件数据，并处理前后指令的依赖性，无依赖关系且数据均准备好后送入执行单元执行
译码单元还要做好记录工作，由于flush导致的重新取指和流水线中剩余指令的数据依赖关系需要处理好。有些指令还未写回，新指令已经来临。
### 输入
    input [31:0] instr_ifu_2_dec_i;  // 输入的指令数据
    input [10:0]   rd_mem_2_wb_i;             // 目的寄存器编号,位宽暂定
    input [31:0]   rd_data_mem_2_wb_i;        // 需要写回寄存器文件的数据
    input        flush_from_exe;                //从执行单元来的分支信号

### 输出
    output [31:0]  opcode_dec_2_exe_o;          // 操作类型,位宽暂定
    output [31:0]   rs1_dec_2_exe_o;            // 源操作数1
    output [31:0]   rs2_dec_2_exe_o;            // 源操作数2
    output [10:0]   rd_dec_2_exe_o;             // 目的寄存器编号,位宽暂定
    output          flush_from_dec;             // 译码发现分支错误，默认不跳转
    output [31:0]   flush_addr_dec;             // 正确的执行地址
#################################################################

#################################################################
## 执行
执行单元负责将译码单元送来的指令和数据送入不同的执行单元进行执行操作，并将执行完的结果送入下一级访存单元，由于这是流水线的执行，因此对于非访存指令也要送入方寸单元
### 输入
    input [31:0]  opcode_dec_2_exe_i;           // 操作类型,位宽暂定
    input [31:0]   rs1_dec_2_exe_i;             // 源操作数1
    input [31:0]   rs2_dec_2_exe_i;             // 源操作数2
    input [10:0]   rd_dec_2_exe_i;              // 目的寄存器编号,位宽暂定
### 输出

    output [31:0]  opcode_exe_2_mem_o;          // 操作类型,位宽暂定
    output [10:0]   rd_exe_2_mem_o;             // 目的寄存器编号,位宽暂定
    output [31:0]   rd_data_exe_2_mem_o;        // 计算结果
    output          flush_from_exe;            // 分支跳转,对于分支指令，使用其计算得到的地址，默认是不跳转
    output [31:0]   flush_addr_exe;             //正确的执行地址

#################################################################

#################################################################
## 访存
访存单元负责执行访存指令，将数据从DCCM里读出或者是写入DCCM对于非访存指令，则送入下一级流水线单元
### 输入
    input [31:0]  opcode_exe_2_mem_i;          // 操作类型,位宽暂定
    input [10:0]   rd_exe_2_mem_i;             // 目的寄存器编号,位宽暂定
    input [31:0]   rd_data_exe_2_mem_i;        // 计算结果，可能是访存地址



### 输出
    output [10:0]   rd_mem_2_wb_o;             // 目的寄存器编号,位宽暂定
    output [31:0]   rd_data_mem_2_wb_o;        // 需要写回寄存器文件的数据


#################################################################

#################################################################
## 写回
写回单元负责将需要写回的数据写回至寄存器文件对于后面有依赖关系的指令要处理好相应的信号，该流水线单元和译码单元进行结合完成，没有单独的功能模块
#################################################################
